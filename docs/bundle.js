(()=>{"use strict";const t=async t=>{try{const e=await fetch(`https://pokeapi.co/api/v2/pokemon/${t}`),o=await e.json();return{id:o.id,name:o.name,img:o.sprites.other["official-artwork"].front_default,icon:o.sprites.front_default,types:o.types,stats:o.stats,moves:o.moves}}catch(t){return t.message}},e=((t,e)=>{let o=e,s=[];return{subscribe:t=>s.push(t),dispatch:e=>{var n;o=t(e,o),n=o,s.forEach((t=>t(n)))}}})(((t,e)=>{const{type:o,payload:s}=t;switch(o){case"SET_CURRENT_POKEMON":return{...e,currentPokemon:s,loading:!1,error:""};case"LOADING":return{...e,loading:!0};case"SET_ERROR":return{...e,error:s,loading:!1};case"SET_FAVORITE":return{...e,favorites:[...e.favorites,s]};default:return e}}),{currentPokemon:{id:1,name:"",img:"",icon:"",types:[],stats:[],moves:[]},error:"",loading:!1,favorites:[]}),{dispatch:o,subscribe:s}=e,n=new class{constructor(){this.printPoke=({currentPokemon:t,loading:e,error:o})=>{e?this.screen.innerHTML='<div class="lds-ripple"><div></div><div></div></div>':o?(this.screen.innerHTML="<p class='screen__error'>It looks like it is not a pokemon. <br/><br/>Try again.",this.name.innerHTML="Oops!"):(this.screen.innerHTML=`<img class='screen__image' id='img' src=${t.img} alt="">`,this.name.innerText=t.name,this.typesSection.innerHTML="",t.types.map((t=>{const{background:e,color:o}=(t=>{switch(t){case"normal":return{background:"#A8A090",color:"white"};case"fighting":return{background:"#A05038",color:"white"};case"flying":return{background:"#98A8F0",color:"black"};case"poison":return{background:"#B058A0",color:"white"};case"ground":return{background:"#E9D6A4",color:"black"};case"rock":return{background:"#B8A058",color:"white"};case"bug":return{background:"#A8B820",color:"black"};case"ghost":return{background:"#6060B0",color:"white"};case"steel":return{background:"#A8A8C0",color:"black"};case"fire":return{background:"#F05030",color:"white"};case"water":return{background:"#3899F8",color:"black"};case"grass":return{background:"#78C850",color:"black"};case"electric":return{background:"#F8D030",color:"black"};case"psychic":return{background:"#F870A0",color:"black"};case"ice":return{background:"#58C8E0",color:"white"};case"dragon":return{background:"#7860E0",color:"white"};case"dark":return{background:"#7A5848",color:"white"};case"fairy":return{background:"#E79FE7",color:"white"}}})(t.type.name),s=`\n\t\t\t\t\t\t<div class='controls__type' style= 'background: ${e}; color:${o}'>\n\t\t\t\t\t\t\t${t.type.name}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t`;this.typesSection.innerHTML=this.typesSection.innerHTML+s})))},this.screen=document.getElementById("screen"),this.name=document.getElementById("name"),this.typesSection=document.getElementById("types")}},r=new class{constructor(e){this.setPokemon=async e=>{this.dispatch({type:"LOADING"});const o=await t(e);this.dispatch({type:"SET_CURRENT_POKEMON",payload:o})},this.arrowControls=({currentPokemon:{id:t}})=>{this.right.onclick=()=>this.setPokemon(t+1),this.up.onclick=()=>this.setPokemon(t+10),t>10&&(this.down.onclick=()=>this.setPokemon(t-10)),t>1&&(this.left.onclick=()=>this.setPokemon(t-1)),t<10&&(this.down.onclick=()=>this.setPokemon(898),this.left.onclick=()=>this.setPokemon(898)),document.onkeyup=({key:e})=>{switch(e){case"ArrowRight":this.setPokemon(t+1);break;case"ArrowUp":this.setPokemon(t+10);break;case"ArrowDown":this.setPokemon(t-10);break;case"ArrowLeft":this.setPokemon(t-1)}}},this.setRandomPokemon=()=>{this.randomPoke.addEventListener("click",(async()=>{let t=Math.floor(893*Math.random()+1);this.setPokemon(t)}))},this.addFavoritePokemon=({currentPokemon:t,favorites:e})=>{this.addFavorite.onclick=()=>{this.dispatch({type:"SET_FAVORITE",payload:t})},10===e.length&&this.addFavorite.classList.add("favorite-unactive")},this.dispatch=e,this.right=document.getElementById("next"),this.left=document.getElementById("back"),this.up=document.getElementById("up"),this.down=document.getElementById("down"),this.randomPoke=document.getElementById("randomPoke"),this.addFavorite=document.getElementById("addFavorite"),this.setRandomPokemon()}}(o),a=new class{constructor(){this.printFavorites=({favorites:t})=>{t.map(((t,e)=>{const o=`<img class='table__pokemon' src=${t.icon} />`;this.tableElements[e].innerHTML="",this.tableElements[e].innerHTML=o}))},this.tableElements=document.querySelectorAll(".table__element")}};new class{constructor(e){this.setInitialPokemon=async()=>{this.dispatch({type:"LOADING"});const e=await t(1);this.dispatch({type:"SET_CURRENT_POKEMON",payload:e})},this.searchPokemon=async()=>{this.input.onchange=async({target:{value:e}})=>{const o=e.toLowerCase();this.dispatch({type:"LOADING"});const s=await t(o);"string"==typeof s?this.dispatch({type:"SET_ERROR",payload:s}):this.dispatch({type:"SET_CURRENT_POKEMON",payload:s})}},this.dispatch=e,this.input=document.getElementById("search"),this.setInitialPokemon(),this.searchPokemon()}}(o),s((t=>{console.log(t)})),s(n.printPoke),s(r.arrowControls),s(r.addFavoritePokemon),s(a.printFavorites)})();