(()=>{"use strict";const t=async t=>{try{const e=await fetch(`https://pokeapi.co/api/v2/pokemon/${t}`),s=await e.json();return{id:s.id,name:s.name,img:s.sprites.other["official-artwork"].front_default,icon:s.sprites.front_default,types:s.types,stats:s.stats,moves:s.moves,weight:s.weight,experience:s.base_experience}}catch(t){return t.message}},e=class{constructor(){this.successMark=({favoriteAdded:t})=>{t&&(this.favLight.classList.add("succes-mark"),setTimeout((()=>{this.favLight.classList.remove("succes-mark")}),1e3))},this.favLight=document.getElementById("fav-light")}},{dispatch:s,subscribe:n}=((t,e)=>{let s=e,n=[];return{subscribe:t=>n.push(t),dispatch:e=>{var o;s=t(e,s),o=s,n.forEach((t=>t(o)))},getState:()=>s}})(((t,e)=>{const{type:s,payload:n}=t;switch(s){case"SET_CURRENT_POKEMON":return{...e,currentPokemon:n,loading:!1,error:""};case"LOADING":return{...e,loading:!0};case"SET_ERROR":return{...e,error:n,loading:!1};case"SET_FAVORITE":return{...e,favoriteAdded:!1,favorites:[...e.favorites,n]};case"FAVORITE_SUCCESS":return{...e,favoriteAdded:!0};default:return e}}),{currentPokemon:{id:1,name:"",img:"",icon:"",types:[],stats:[],moves:[],weight:0,experience:0},error:"",loading:!1,favorites:[],favoriteAdded:!1}),o=new class{constructor(){this.printPokemon=({currentPokemon:t,loading:e,error:s})=>{e?(this.screen.innerHTML='<div class="lds-ripple"><div></div><div></div></div>',this.animatedRadar.play()):s?(this.screen.innerHTML="<p class='screen__error'>It looks like it is not a pokemon. <br/><br/>Try again.",this.name.innerHTML="Oops!"):(this.screen.innerHTML=`<img class='screen__image' id='img' src=${t.img} alt="">`,this.name.innerText=t.name,this.typesSection.innerHTML="",t.types.map((t=>{const{background:e,color:s}=(t=>{switch(t){case"normal":return{background:"#A8A090",color:"white"};case"fighting":return{background:"#A05038",color:"white"};case"flying":return{background:"#98A8F0",color:"black"};case"poison":return{background:"#B058A0",color:"white"};case"ground":return{background:"#E9D6A4",color:"black"};case"rock":return{background:"#B8A058",color:"white"};case"bug":return{background:"#A8B820",color:"black"};case"ghost":return{background:"#6060B0",color:"white"};case"steel":return{background:"#A8A8C0",color:"black"};case"fire":return{background:"#F05030",color:"white"};case"water":return{background:"#3899F8",color:"black"};case"grass":return{background:"#78C850",color:"black"};case"electric":return{background:"#F8D030",color:"black"};case"psychic":return{background:"#F870A0",color:"black"};case"ice":return{background:"#58C8E0",color:"white"};case"dragon":return{background:"#7860E0",color:"white"};case"dark":return{background:"#7A5848",color:"white"};case"fairy":return{background:"#E79FE7",color:"white"}}})(t.type.name),n=`\n\t\t\t\t\t\t<div class='controls__type' style= 'background: ${e}; color:${s}'>\n\t\t\t\t\t\t\t${t.type.name}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t`;this.typesSection.innerHTML=this.typesSection.innerHTML+n,this.animatedRadar.pause()})))},this.screen=document.getElementById("screen"),this.name=document.getElementById("name"),this.typesSection=document.getElementById("types"),this.radar=document.getElementById("radar"),this.animatedRadar=this.radar.animate([{transform:"rotate(0deg)"},{transform:"rotate(360deg)"}],{duration:1e3,easing:"linear",fill:"forwards",iterations:1/0})}},r=(new class{constructor(e){this.setInitialPokemon=async()=>{this.dispatch({type:"LOADING"});const e=await t(1);this.dispatch({type:"SET_CURRENT_POKEMON",payload:e})},this.searchPokemon=async()=>{this.input.onchange=async({target:{value:e}})=>{const s=e.toLowerCase();this.dispatch({type:"LOADING"});const n=await t(s);"string"==typeof n?this.dispatch({type:"SET_ERROR",payload:n}):this.dispatch({type:"SET_CURRENT_POKEMON",payload:n})}},this.dispatch=e,this.input=document.getElementById("search"),this.setInitialPokemon(),this.searchPokemon()}}(s),new class{constructor(e){this.setPokemon=async e=>{this.dispatch({type:"LOADING"});const s=await t(e);this.dispatch({type:"SET_CURRENT_POKEMON",payload:s})},this.arrowControls=({currentPokemon:{id:t}})=>{this.right.onclick=()=>this.setPokemon(t+1),this.up.onclick=()=>this.setPokemon(t+10),1===t&&(this.down.onclick=()=>this.setPokemon(888),this.left.onclick=()=>this.setPokemon(898)),898===t&&(this.right.onclick=()=>this.setPokemon(1),this.up.onclick=()=>this.setPokemon(10)),t>10&&(this.down.onclick=()=>this.setPokemon(t-10)),t<10&&(this.down.onclick=()=>this.setPokemon(898-t)),t>1&&(this.left.onclick=()=>this.setPokemon(t-1)),document.onkeyup=({key:e})=>{switch(e){case"ArrowRight":this.setPokemon(t+1);break;case"ArrowUp":this.setPokemon(t+10);break;case"ArrowDown":this.setPokemon(t-10);break;case"ArrowLeft":this.setPokemon(t-1)}}},this.setRandomPokemon=()=>{this.randomPoke.addEventListener("click",(async()=>{let t=Math.floor(893*Math.random()+1);this.setPokemon(t)}))},this.addFavoritePokemon=({currentPokemon:t,favorites:e})=>{this.addFavorite.onclick=()=>{this.dispatch({type:"FAVORITE_SUCCESS"}),this.dispatch({type:"SET_FAVORITE",payload:t})},10===e.length&&this.addFavorite.classList.add("favorite-unactive")},this.dispatch=e,this.right=document.getElementById("next"),this.left=document.getElementById("back"),this.up=document.getElementById("up"),this.down=document.getElementById("down"),this.randomPoke=document.getElementById("randomPoke"),this.addFavorite=document.getElementById("addFavorite"),this.setRandomPokemon()}}(s)),i=new class{constructor(){this.printFavorites=({favorites:t})=>{t.map(((t,e)=>{const s=`<img class='table__pokemon' src=${t.icon} />`;this.tableElements[e].innerHTML="",this.tableElements[e].innerHTML=s}))},this.tableElements=document.querySelectorAll(".table__element")}},a=new e,c=(new e,new class{constructor(){this.printStats=({currentPokemon:{stats:t,experience:e,weight:s}})=>{this.statsScreen.innerHTML="",t.map((({base_stat:t,stat:{name:e}})=>{const s=`\n      <p class='stats-screen__item'>${e}: <span>${t}</span></p>\n      `;this.statsScreen.innerHTML=this.statsScreen.innerHTML+s})),this.weight.innerHTML=`<p>Weight: <span>${s}</span></p>`,this.experience.innerHTML=`<p>Exp: <span>${e}</span></p>`},this.statsScreen=document.getElementById("statsScreen"),this.weight=document.getElementById("weight"),this.experience=document.getElementById("experience")}});n(o.printPokemon),n(r.arrowControls),n(r.addFavoritePokemon),n(i.printFavorites),n(a.successMark),n(c.printStats)})();